<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:app="clr-namespace:MauiApp1"
             xmlns:model="clr-namespace:MauiApp1.Model"
             x:Class="MauiApp1.MainPage"
             Background="#CBE0E3" x:DataType="app:MainPage">

    <Grid RowDefinitions="Auto,0,Auto,Auto,*"
          Margin="10, 10, 10, 10"
          RowSpacing="2">

        <Grid ColumnDefinitions="*, auto" Margin="0, 10, 0, 0">
            <Label Grid.Row="0"
                   Text="Угрозы"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="Black"
                   Grid.Column="0" />
            
            <app:P2pView x:Name="P2p" SpaceObjectReceived="P2pView_OnSpaceObjectReceived"/>
        </Grid>
        <!-- Заголовок -->

        <!--Кнопки управления-->
        <HorizontalStackLayout Grid.Row="3"
                               HorizontalOptions="Center"
                               Spacing="8"
                               Margin="0,0,0,8">
            <Button Text="Добавить"
                    Clicked="OnAddObjectClicked"
                    WidthRequest="120"
                    HeightRequest="45"
                    BackgroundColor="#20B2AA"
                    FontSize="12" />
            <Button x:Name="autoAddButton"
                    Text="Авто"
                    Clicked="OnAutoAddClicked"
                    WidthRequest="80"
                    HeightRequest="45"
                    BackgroundColor="#4682B4"
                    FontSize="12" />
        </HorizontalStackLayout>

        <!-- Список объектов -->
        <!--BackgroundColor="{Binding Threat, Converter={StaticResource ThreatToColorConverter}}">-->
        <CollectionView Grid.Row="4"
                        x:Name="objectsCollectionView"
                        SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:SpaceObject">
                    <app:SpaceObjectView DoubleTapped="SpaceObjectView_OnDoubleTapped"/>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>